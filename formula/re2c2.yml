summary: Generate C-based recognizers from regular expressions
web-url: https://re2c.org/
git-url: https://github.com/skvadrik/re2c
src-url: https://github.com/skvadrik/re2c/releases/download/3.1/re2c-3.1.tar.xz
src-sha: 0ac299ad359e3f512b06a99397d025cfff81d3be34464ded0656f8a96676c029

install: |
    cmakew \
        -DBUILD_SHARED_LIBS=OFF \
        -DRE2C_BUILD_LIBS=ON \
        -DRE2C_BUILD_RE2GO=ON \
        -DRE2C_BUILD_RE2RUST=ON \
        -DRE2C_REBUILD_DOCS=OFF

dep-upp: patch
dopatch: |
    printf '
    LS0tIGNtYWtlL1JlMmNCb290c3RyYXBMZXhlci5jbWFrZS5iYWsJMjAyNC0wNS0zMSAyMjo0Mjow
    NgorKysgY21ha2UvUmUyY0Jvb3RzdHJhcExleGVyLmNtYWtlCTIwMjQtMDUtMzEgMjI6NDU6MTEK
    QEAgLTEsNyArMSwxMiBAQAogZnVuY3Rpb24ocmUyY19ib290c3RyYXBfbGV4ZXIgaW5wdXQgb3V0
    cHV0KQorICAgIG1lc3NhZ2UoIkFSR1Y9JHtBUkdWfSIpCisgICAgbWVzc2FnZSgiQVJHTj0ke0FS
    R059IikKKwogICAgICMgb3B0aW9uYWwgaGVhZGVyIGZpbGUsIDNyZCBhcmd1bWVudAogICAgIHNl
    dChoZWFkZXIgIiR7QVJHTn0iKQogCisgICAgbWVzc2FnZSgiaGVhZGVyPSR7aGVhZGVyfSIpCisK
    ICAgICAjIHNvdXJjZSBmaWxlcyAodXNlIHJlbGF0aXZlIHBhdGggdG8gYXZvaWQgaGFyZGNvZGlu
    ZyBpbiBsaW5lIGRpcmVjdGl2ZXMpCiAgICAgc2V0KHNvdXJjZSAiJHtDTUFLRV9DVVJSRU5UX1NP
    VVJDRV9ESVJ9LyR7aW5wdXR9IikKICAgICBmaWxlKFJFTEFUSVZFX1BBVEggcmVsYXRpdmVfc291
    cmNlICIke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0iICIke3NvdXJjZX0iKQpAQCAtNDMsNiAr
    NDgsNyBAQAogICAgIGVsc2UoKQogICAgICAgICAjIGNvcHkgcHJlY29tcGlsZWQgYm9vdHN0cmFw
    IGZpbGUocykKICAgICAgICAgaWYoIiR7aGVhZGVyfSIgU1RSRVFVQUwgIiIpCisgICAgICAgICAg
    ICBtZXNzYWdlKCJ3aXRob3V0IGhlYWRlciIpCiAgICAgICAgICAgICAjIHdpdGhvdXQgaGVhZGVy
    CiAgICAgICAgICAgICBhZGRfY3VzdG9tX2NvbW1hbmQoCiAgICAgICAgICAgICAgICAgT1VUUFVU
    ICIke291dHB1dH0iCkBAIC01MSw2ICs1Nyw3IEBACiAgICAgICAgICAgICAgICAgQ09NTUVOVCAi
    Q29weWluZyBib290c3RyYXAgJHtvdXRwdXR9LCByZWNvbmZpZ3VyZSB3aXRoIFJFMkNfUkVCVUlM
    RF9MRVhFUlMgdG8gcmVnZW5lcmF0ZSIKICAgICAgICAgICAgICkKICAgICAgICAgZWxzZSgpCisg
    ICAgICAgICAgICBtZXNzYWdlKCJ3aXRoIGhlYWRlciIpCiAgICAgICAgICAgICAjIHdpdGggaGVh
    ZGVyCiAgICAgICAgICAgICBhZGRfY3VzdG9tX2NvbW1hbmQoCiAgICAgICAgICAgICAgICAgT1VU
    UFVUICIke291dHB1dH0iICIke2hlYWRlcn0iCg==' | base64 -d | patch -p0

    install -d _/src/parse/
    cp -v bootstrap/src/parse/lex.h _/src/parse/lex.h
