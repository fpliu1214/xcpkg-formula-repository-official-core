pkgtype: exe+lib
summary: A generic-purpose lossless compression algorithm by Google
git-url: https://github.com/google/brotli
src-url: https://github.com/google/brotli/archive/v1.1.0.tar.gz
src-sha: e720a6ca29428b803f4ad165371771f5398faba397edf6778837a18599ea13ff
license: MIT
install: |
    cmakew -DBUILD_SHARED_LIBS=OFF -DBROTLI_BUILD_TOOLS=ON  -DBROTLI_DISABLE_TESTS=ON
    cmakew -DBUILD_SHARED_LIBS=ON  -DBROTLI_BUILD_TOOLS=OFF -DBROTLI_DISABLE_TESTS=ON

dep-upp: patch
dopatch: |
    # remove in next release
    printf '%s\n' '
    LS0tIENNYWtlTGlzdHMudHh0CTIwMjMtMDgtMjkgMTk6MDA6MjkuMDAwMDAwMDAwICswODAwCisr
    KyBDTWFrZUxpc3RzLnR4dC5uZXcJMjAyNC0wMi0wNiAyMDoxMzozNC45MDAxODMyNDIgKzA4MDAK
    QEAgLTExLDYgKzExLDcgQEAKIHByb2plY3QoYnJvdGxpIEMpCiAKIG9wdGlvbihCVUlMRF9TSEFS
    RURfTElCUyAiQnVpbGQgc2hhcmVkIGxpYnJhcmllcyIgT04pCitzZXQoQlJPVExJX0JVSUxEX1RP
    T0xTIE9OIENBQ0hFIEJPT0wgIkJ1aWxkL2luc3RhbGwgQ0xJIHRvb2xzIikKIAogaWYoTk9UIENN
    QUtFX0JVSUxEX1RZUEUgQU5EIE5PVCBDTUFLRV9DT05GSUdVUkFUSU9OX1RZUEVTKQogICBtZXNz
    YWdlKFNUQVRVUyAiU2V0dGluZyBidWlsZCB0eXBlIHRvIFJlbGVhc2UgYXMgbm9uZSB3YXMgc3Bl
    Y2lmaWVkLiIpCkBAIC0xNjgsMTYgKzE2OSwyMCBAQAogICBzZXQoQlJPVExJX0xJQlJBUklFUyAi
    JHtCUk9UTElfTElCUkFSSUVTfSIgUEFSRU5UX1NDT1BFKQogZW5kaWYoKQogCi0jIEJ1aWxkIHRo
    ZSBicm90bGkgZXhlY3V0YWJsZQotYWRkX2V4ZWN1dGFibGUoYnJvdGxpIGMvdG9vbHMvYnJvdGxp
    LmMpCi10YXJnZXRfbGlua19saWJyYXJpZXMoYnJvdGxpICR7QlJPVExJX0xJQlJBUklFU30pCitp
    ZiAoQlJPVExJX0JVSUxEX1RPT0xTKQorICAgICMgQnVpbGQgdGhlIGJyb3RsaSBleGVjdXRhYmxl
    CisgICAgYWRkX2V4ZWN1dGFibGUoYnJvdGxpIGMvdG9vbHMvYnJvdGxpLmMpCisgICAgdGFyZ2V0
    X2xpbmtfbGlicmFyaWVzKGJyb3RsaSAke0JST1RMSV9MSUJSQVJJRVN9KQorZW5kaWYoKQogCiAj
    IEluc3RhbGxhdGlvbgogaWYoTk9UIEJST1RMSV9CVU5ETEVEX01PREUpCi0gIGluc3RhbGwoCi0g
    ICAgVEFSR0VUUyBicm90bGkKLSAgICBSVU5USU1FIERFU1RJTkFUSU9OICIke0NNQUtFX0lOU1RB
    TExfQklORElSfSIKLSAgKQorICAgIGlmIChCUk9UTElfQlVJTERfVE9PTFMpCisgICAgICBpbnN0
    YWxsKAorICAgICAgICBUQVJHRVRTIGJyb3RsaQorICAgICAgICBSVU5USU1FIERFU1RJTkFUSU9O
    ICIke0NNQUtFX0lOU1RBTExfQklORElSfSIKKyAgICAgICkKKyAgICBlbmRpZigpCiAKICAgaW5z
    dGFsbCgKICAgICBUQVJHRVRTICR7QlJPVExJX0xJQlJBUklFU19DT1JFfQo=' | base64 -d | patch -p0
