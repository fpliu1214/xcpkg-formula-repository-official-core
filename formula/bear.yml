summary: Generate compilation database for clang tooling
git-url: https://github.com/rizsotto/Bear
src-url: https://github.com/rizsotto/Bear/archive/3.1.3.tar.gz
src-sha: 8314438428069ffeca15e2644eaa51284f884b7a1b2ddfdafe12152581b13398
license: GPL-3.0-or-later
dep-pkg: grpc nlohmann-json spdlog
dep-upp: grpc-plugins

dopatch2: |
    sed_in_place '/-DPKG_CONFIG_EXECUTABLE/a -DCMAKE_PROJECT_INCLUDE=${CMAKE_PROJECT_INCLUDE}' CMakeLists.txt
    sed_in_place 's|fmt_VERSION_MAJOR EQUAL 9|fmt_VERSION_MAJOR GREATER_EQUAL 9|' source/CMakeLists.txt

install: |
    cmakew \
        -DENABLE_UNIT_TESTS=OFF \
        -DENABLE_FUNC_TESTS=OFF
